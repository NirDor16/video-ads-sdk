<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Admin Portal ‚Äî Video Ads SDK</title>
  <link rel="stylesheet" href="assets/style.css"/>
</head>
<body>
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="index.html">üé¨ Video Ads SDK</a>
      <div class="links">
        <a href="android-sdk.html">Android SDK</a>
        <a href="api.html">API</a>
        <a class="active" href="admin-portal.html">Admin Portal</a>
        <a href="architecture.html">Architecture</a>
      </div>
    </div>
  </nav>

  <main class="container page">
    <h1>Admin Portal (URL-based)</h1>
    <p>
      The Admin Portal is a lightweight web UI for managing ads stored in MongoDB through the backend API.
      It is designed for simple operations only:
      <b>Load existing ads</b>, <b>Add a new ad</b> (URL-based), and <b>Delete an ad</b>.
    </p>

    <section class="box">
      <h2>How to Open</h2>
      <p>
        When the backend is deployed (e.g., Render), open:
        <code>https://video-ads-sdk.onrender.com/admin</code>
      </p>
      <p class="note">
        The Admin Portal is a convenience UI. It calls the same public REST API endpoints described in the <a href="api.html">API page</a>.
      </p>
    </section>

    <section class="box">
      <h2>App ID (Why it matters)</h2>
      <p>
        Ads are managed per application using <code>app_id</code>.
        This allows multiple client apps to use the same backend + database while keeping their ads separated.
      </p>
      <ul>
        <li><b>demo_app</b> is the default demo application id (used in seed data).</li>
        <li>When a developer integrates the SDK, they set <code>appId</code> in <code>AdsSdk.init()</code>.</li>
        <li>The backend serves ads matching that <code>app_id</code> only.</li>
      </ul>
    </section>

    <section class="box">
      <h2>Portal Screen Overview</h2>
      <ol>
        <li>
          <b>App ID + Load Ads</b> ‚Äî enter an <code>app_id</code> and click <b>Load Ads</b> to fetch ads for that app.
        </li>
        <li>
          <b>Add New Ad</b> ‚Äî fill details and click <b>Add</b> to create a new ad under the selected <code>app_id</code>.
        </li>
        <li>
          <b>Existing Ads Table</b> ‚Äî shows all current ads for the selected <code>app_id</code>, with quick links and delete actions.
        </li>
      </ol>
    </section>

    <section class="box">
      <h2>Adding a New Ad (Fields)</h2>
      <p>
        The portal is <b>URL-based</b>. You do not upload files to the server.
        Instead, you store a <b>direct video URL</b> (usually MP4) that the SDK can stream.
      </p>

      <ul>
        <li><b>Category</b> (<code>category_id</code>) ‚Äî must match existing categories (e.g., TV / CAR / GAME).</li>
        <li><b>Title</b> ‚Äî a human-friendly name displayed in admin tables/logs.</li>
        <li><b>Ad ID (optional)</b> ‚Äî if empty, backend auto-generates an id.</li>
        <li><b>Video URL (mp4)</b> ‚Äî required. This is the video shown inside the SDK.</li>
        <li><b>Target URL (optional)</b> ‚Äî if provided, clicking the video can open this link.</li>
      </ul>

      <p class="note">
        <b>If Target URL is empty:</b> the video still plays normally. Clicking the ad will simply do nothing (no redirect).
      </p>
    </section>

    <section class="box">
      <h2>Existing Ads Table</h2>
      <p>
        After clicking <b>Load Ads</b>, you will see a table of ads for that <code>app_id</code>.
      </p>
      <ul>
        <li><b>Video / Target ‚Äúopen‚Äù links</b> are direct links to verify URLs quickly.</li>
        <li><b>Delete</b> removes the ad from the database permanently.</li>
      </ul>
      <p class="note">
        Deleting an ad means it will no longer be served by <code>/v1/serve</code>, and the SDK will stop showing it.
      </p>
    </section>

    <section class="box">
      <h2>What happens when a user clicks the ad many times?</h2>
      <p>
        The SDK decides <b>when</b> to show an ad based on the trigger mode (CLICKS or INTERVAL).
        When it‚Äôs time to show an ad, the SDK requests one ad from the backend.
      </p>
      <ul>
        <li>If your backend serves ads in <b>RANDOM</b> mode, repeated triggers may show different ads.</li>
        <li>If your backend serves ads in a deterministic mode, it may repeat the same ad (depending on implementation).</li>
      </ul>
      <p class="note">
        In the current design, the portal manages content only (add/delete/list). Rotation logic is handled by the backend serve endpoint.
      </p>
    </section>

    <section class="box">
      <h2>Security note</h2>
      <p>
        This portal is intended for a course/demo environment.
        In a production system you would protect it (authentication + authorization) and validate uploaded URLs.
      </p>
    </section>

    <div class="back">
      <a href="index.html">‚Üê Back to home</a>
    </div>
  </main>
</body>
</html>
